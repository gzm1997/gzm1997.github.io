<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>gzm&#39;s blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="gzm&#39;s blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="gzm&#39;s blogs">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="gzm&#39;s blogs">
  
    <link rel="alternate" href="/atom.xml" title="gzm&#39;s blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">gzm&#39;s blogs</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-nginx-supervisor部署aiohttp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/08/nginx-supervisor部署aiohttp/" class="article-date">
  <time datetime="2018-06-08T07:18:32.000Z" itemprop="datePublished">2018-06-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/08/nginx-supervisor部署aiohttp/">nginx+supervisor部署aiohttp</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>服务器上的部署问题一直很让我头疼 因为我一直是一个在windows平台上开发的 但是vps一直都是选择ubuntu16.04居多 因为在windos系统上 权限是一个总是不是被注意的事情 但是在ubuntu系统上部署web后端的时候 权限问题尤为重要</p>
</blockquote>
<hr>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>为什么选择nginx+supervisor这样的组合来部署 因为</p>
<p>优点</p>
<ul>
<li>nginx是一个完美的前端服务器 可以防止基于畸形的http协议的攻击等等</li>
<li>使用nginx运行几个aiohttp实例可以使用CPU多核</li>
<li>nginx对static静态文件的支持比aiohttp的内置的静态文件支持更快</li>
<li>supervisor主要是为了系统崩溃或者重启之后重新运行web app实例 怎么kill也kill不掉</li>
</ul>
<p>缺点</p>
<ul>
<li>配置比其他组合方式麻烦一点</li>
</ul>
<p><a href="https://aiohttp.readthedocs.io/en/stable/deployment.html#nginx-supervisord" target="_blank" rel="noopener">参考链接</a></p>
<p>由于选择使用nginx+superviosr的组合方式部署aiohttp 所以要先下载nginx和supervisor 这个没什么问题 自行谷歌即可 但是要注意点</p>
<blockquote>
<p>因为aiohttp是只可以支持python3.5.3+的 但是好巧不巧ubuntu16.04的自带python版本是python3.5.2 这下有点蛋疼 我给的建议是保留python3.5 另外安装python3.6</p>
<p>因为ubuntu系统以及很多像sublime等软件都是依赖py2或者py3.5的 一旦卸载或者修改了/use/bin/python的链接<br>会导致一系列版本不兼容的问题 我试过最严重的是卸载了python3.5 并且修改默认python版本为3.6 系统崩溃<br>折腾了很久最后只能重装系统</p>
<p>为什么我要说这个呢 因为supervisor依赖于ubuntu的py2的<br>所以最好不要卸载任何版本python和修改系统默认的python版本 最好就另行安装python3.6 终端中使用python3.6调用即可</p>
</blockquote>
<p>项目代码放置于/var/www/aio_ooad下<br><img src="http://static.zybuluo.com/gzm1997/0wr0fcj2lo4yhzqwxxtaybpo/image_1cff1giub10gmo07k6b16gjv339.png" alt="image_1cff1giub10gmo07k6b16gjv339.png-71.6kB"></p>
<hr>
<h2 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a>nginx配置</h2><ul>
<li>nginx配置文件 /etc/nginx/nginx.conf</li>
<li>nginx日志文件 <ul>
<li>/var/log/nginx/access.log</li>
<li>/var/log/nginx/error.log</li>
</ul>
</li>
</ul>
<p>/etc/nginx/nginx.conf<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  server &#123;</span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    client_max_body_size <span class="number">4</span>G;</span><br><span class="line"></span><br><span class="line">    server_name localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_set_header Host $http_host;</span><br><span class="line">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">      proxy_redirect off;</span><br><span class="line">      proxy_buffering off;</span><br><span class="line">      proxy_pass http:<span class="comment">//aiohttp;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /<span class="keyword">static</span> &#123;</span><br><span class="line">      # path for static files</span><br><span class="line">      root /var/www/aio_ooad/<span class="keyword">static</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  upstream aiohttp &#123;</span><br><span class="line">    # fail_timeout=0 means we always retry an upstream even if it failed</span><br><span class="line">    # to return a good HTTP response</span><br><span class="line"></span><br><span class="line">    # Unix domain servers</span><br><span class="line">    server unix:/var/www/aio_ooad/example_1.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line">    server unix:/var/www/aio_ooad/example_2.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line">    server unix:/var/www/aio_ooad/example_3.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line">    server unix:/var/www/aio_ooad/example_4.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    # Unix domain sockets are used in this example due to their high performance,</span><br><span class="line">    # but TCP/IP sockets could be used instead:</span><br><span class="line">    # server 127.0.0.1:8081 fail_timeout=0;</span><br><span class="line">    # server 127.0.0.1:8082 fail_timeout=0;</span><br><span class="line">    # server 127.0.0.1:8083 fail_timeout=0;</span><br><span class="line">    # server 127.0.0.1:8084 fail_timeout=0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面大部分内容都是常规的</p>
<p>指明静态文件路径 nginx提供静态文件的支持是很快的 这是选择nginx部署的原因之一<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location /<span class="keyword">static</span> &#123;</span><br><span class="line">  # path for static files</span><br><span class="line">  root /var/www/aio_ooad/<span class="keyword">static</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>选择使用unix domian sockets文件的方式设置upstream 下面的注释也说到也可以使用TCP/IP sockets的方式 但是unix domain socket效果更好 一共配置了四个sockets文件 意味着后台一共有四个web app实例可以供nginx轮询选择<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">upstream aiohttp &#123;</span><br><span class="line">  # fail_timeout=0 means we always retry an upstream even if it failed</span><br><span class="line">  # to return a good HTTP response</span><br><span class="line"></span><br><span class="line">  # Unix domain servers</span><br><span class="line">  server unix:/var/www/aio_ooad/example_1.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line">  server unix:/var/www/aio_ooad/example_2.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line">  server unix:/var/www/aio_ooad/example_3.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line">  server unix:/var/www/aio_ooad/example_4.sock fail_timeout=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  # Unix domain sockets are used in this example due to their high performance,</span><br><span class="line">  # but TCP/IP sockets could be used instead:</span><br><span class="line">  # server 127.0.0.1:8081 fail_timeout=0;</span><br><span class="line">  # server 127.0.0.1:8082 fail_timeout=0;</span><br><span class="line">  # server 127.0.0.1:8083 fail_timeout=0;</span><br><span class="line">  # server 127.0.0.1:8084 fail_timeout=0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="supervisor配置"><a href="#supervisor配置" class="headerlink" title="supervisor配置"></a>supervisor配置</h2><ul>
<li>supervisor默认配置文件 /etc/supervisor/supervisord.conf</li>
<li>部署项目的配置文件 /etc/supervisor/conf.d/example.ini</li>
</ul>
<p>修改/etc/supervisor/supervisord.conf 最后一行处为<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[include]</span><br><span class="line">files = conf.d<span class="comment">/*.ini    ;</span></span><br></pre></td></tr></table></figure></p>
<p>/etc/supervisor/conf.d/example.ini<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[program:aiohttp]</span><br><span class="line">numprocs = <span class="number">4</span></span><br><span class="line">numprocs_start = <span class="number">1</span></span><br><span class="line">process_name = example_%(process_num)s</span><br><span class="line"></span><br><span class="line">; Unix socket paths are specified by command line.</span><br><span class="line">command=python3.6 /var/www/aio_ooad/test_main.py --path=/var/www/aio_ooad/example_%(process_num)s.sock --port=<span class="number">808</span>%(process_num)s</span><br><span class="line"></span><br><span class="line">; We can just as easily pass TCP port numbers:</span><br><span class="line">; command=/path/to/aiohttp_example.py --port=<span class="number">808</span>%(process_num)s</span><br><span class="line"></span><br><span class="line">user=www-data</span><br><span class="line">autostart=<span class="keyword">true</span></span><br><span class="line">autorestart=<span class="keyword">true</span></span><br></pre></td></tr></table></figure></p>
<pre><code>numprocs = 4
numprocs_start = 1
process_name = example_%(process_num)s
</code></pre><p>一共四个进程 进程号从1到4 进程名字由进程号决定 则为example_1 example_2 example_3 example_4</p>
<pre><code>command=python3.6 /var/www/aio_ooad/test_main.py --path=/var/www/aio_ooad/example_%(process_num)s.sock --port=808%(process_num)s
user=www-data
</code></pre><p>后台运行此命令 也即是运行web app所在的py文件 执行用户为www-data</p>
<p>这里坑就比较多了</p>
<p>1.python模块问题<br>因为supervisor是由root用户运行的 所以在supervisor里面后台执行python命令也是在root用户下执行的</p>
<p>正如我开始所说 我一直依赖都是windows系统下进行开发的 对权限的意识不是很足</p>
<p>下面我们来看看一个模块安装问题<br>因为我是使用普通用户gzm进行安装aiohttp模块的 但是在部署之后日志显示没有安装aiohttp模块</p>
<p>让我们在普通用户gzm下打开python3终端 查看模块安装目录<br><img src="http://static.zybuluo.com/gzm1997/61hncydvbdnd2cwdkcofcks8/image_1cff2k7ie1nqkpra1a7t1pp81e0q2m.png" alt="image_1cff2k7ie1nqkpra1a7t1pp81e0q2m.png-40kB"><br>我们会发现里面有个路径为</p>
<pre><code>/home/gzm/.local/lib/python3.6/site-packages
</code></pre><p>进入之后发现aiohttp正是安装在这个路径下面<br><img src="http://static.zybuluo.com/gzm1997/npxy5oetqeztqsxq16xr4t4b/image_1cff2pkee1quh1kbssklugl167p33.png" alt="image_1cff2pkee1quh1kbssklugl167p33.png-66kB"></p>
<p>然后让我们切换为root用户 查看模块安装路径 发现没有/home/gzm/.local/lib/python3.6/site-packages 这个路径 这就解释了为什么即使我真的在gzm这个用户下安装了aiohttp等模块 但是运行supervisor还是会在日志中报错没有此模块 所以正确的方式是切换到root安装需要的模块<br><img src="http://static.zybuluo.com/gzm1997/clvu614mas8hh45xfdoxsgh3/image_1cff2sipucq2gtm1qid5141fvd4g.png" alt="image_1cff2sipucq2gtm1qid5141fvd4g.png-40.1kB"></p>
<p>还有一个问题是</p>
<pre><code>--path=/var/www/aio_ooad/example_%(process_num)s.sock
</code></pre><p>意味着www-data用户需要在/var/www/aio_ooad目录下创建四个.socket文件 以支持nginx 所以/var/www/aio_ooad这个文件需要把所有权改为www-data 不然会在日志中报错permission denied</p>
<pre><code>sudo chown -R www-data:www-data /var/www/aio_ooad/
</code></pre><hr>
<h2 id="nginx-supervisor重启命令"><a href="#nginx-supervisor重启命令" class="headerlink" title="nginx supervisor重启命令"></a>nginx supervisor重启命令</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/nginx restart</span><br><span class="line">sudo supervisorctl reload</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/08/nginx-supervisor部署aiohttp/" data-id="cji5njk6600079so02zgxuh1m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aiohttp/">aiohttp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deploy/">deploy</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-socket编程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/08/java-socket编程/" class="article-date">
  <time datetime="2018-06-08T07:14:26.000Z" itemprop="datePublished">2018-06-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/08/java-socket编程/">java socket编程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>java的socket编程跟python的很像 而且也很方便 简单记录一下 同时server那边的accept也是阻塞的</p>
</blockquote>
<p>connect函数可以在初始化一个socket对象之后 一般客户端可以用来链接服务端 但是如果在socket构造函数那里传入serverName和port 也是可以在初始化的时候进行连接的</p>
<p>服务端<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JServer</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServerSocket server;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JServer</span><span class="params">(<span class="keyword">int</span> port)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        server = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">        server.setSoTimeout(<span class="number">10000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"等待客户端连接"</span>);</span><br><span class="line">                Socket s = server.accept();</span><br><span class="line">                System.out.println(<span class="string">"远程连接地址 "</span> + s.getRemoteSocketAddress());</span><br><span class="line">                DataInputStream in = <span class="keyword">new</span> DataInputStream(s.getInputStream());</span><br><span class="line">                System.out.println(<span class="string">"接受数据"</span> + in.readUTF());</span><br><span class="line">                DataOutputStream out = <span class="keyword">new</span> DataOutputStream(s.getOutputStream());</span><br><span class="line">                out.writeUTF(<span class="string">"我接收到了 拜拜"</span>);</span><br><span class="line">                s.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException i) &#123;</span><br><span class="line">                i.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        JServer JS = <span class="keyword">new</span> JServer(<span class="number">5000</span>);</span><br><span class="line">        JS.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>客户端<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JClient</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket client;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JClient</span><span class="params">(String serverName, <span class="keyword">int</span> port)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        client = <span class="keyword">new</span> Socket(serverName, port);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"现在开始连接服务端"</span>);</span><br><span class="line">            DataOutputStream out = <span class="keyword">new</span> DataOutputStream(client.getOutputStream());</span><br><span class="line">            out.writeUTF(<span class="string">"我是客户端 服务端你那边接收到我发的信息了没"</span>);</span><br><span class="line">            DataInputStream in = <span class="keyword">new</span> DataInputStream(client.getInputStream());</span><br><span class="line">            System.out.println(<span class="string">"从服务端接受到 "</span> + in.readUTF());</span><br><span class="line">            client.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException i) &#123;</span><br><span class="line">            i.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        JClient client = <span class="keyword">new</span> JClient(<span class="string">"127.0.0.1"</span>, <span class="number">5000</span>);</span><br><span class="line">        client.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果<br><img src="http://static.zybuluo.com/gzm1997/wqhihdmobujgo1q0qhkowxzu/image_1cf7fbt5l1flia2gpmn1bp1328p.png" alt="image_1cf7fbt5l1flia2gpmn1bp1328p.png-192.9kB"><br><img src="http://static.zybuluo.com/gzm1997/n2xnec3oqf70wxtjzugqpfjs/image_1cf7fcgan62o1ict1n4lvbbda16.png" alt="image_1cf7fcgan62o1ict1n4lvbbda16.png-160.3kB"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/08/java-socket编程/" data-id="cji5njk5w00019so0btabkqhl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/socket/">socket</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java基础知识" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/04/java基础知识/" class="article-date">
  <time datetime="2018-06-04T06:33:06.000Z" itemprop="datePublished">2018-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/04/java基础知识/">java基础知识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>gzm keep patient</p>
<hr>
<h2 id="java和编译型语言区别"><a href="#java和编译型语言区别" class="headerlink" title="java和编译型语言区别"></a>java和编译型语言区别</h2><p><img src="http://www.runoob.com/wp-content/uploads/2013/12/ZSSDMld.png" alt="此处输入图片的描述"><br>编译型语言直接编译变为可执行程序exe，然后就可以执行了。但是java需要先编译为.class字節碼，在由解釋器進行解釋執行。可以說java是介於編譯型語言和解釋型語言之間的一鍾語言了。所以網上一直有種說法：最好不要使用編譯型語言和解釋型語言的劃分方法來劃分java，因爲它既有編譯，也有解釋。</p>
<p><img src="http://static.zybuluo.com/gzm1997/j59t84gedmf9aeiomjy15n6z/image_1cer6l3dg1ma768a1egjb8d7671g.png" alt="image_1cer6l3dg1ma768a1egjb8d7671g.png-2.5kB"></p>
<hr>
<h2 id="各种类型变量存储位置"><a href="#各种类型变量存储位置" class="headerlink" title="各种类型变量存储位置"></a>各种类型变量存储位置</h2><p>局部变量 -&gt; 栈<br>动态变量 -&gt; 堆<br>全局变量 静态变量 -&gt; 静态存储区<br>函数代码 -&gt; 代码区<br>常量 -&gt; 常量区</p>
<hr>
<h2 id="java支持的变量类型"><a href="#java支持的变量类型" class="headerlink" title="java支持的变量类型"></a>java支持的变量类型</h2><p>类中的变量类型</p>
<ul>
<li>类变量 独立于方法之外的变量 static修饰 每个类共享</li>
<li>实例变量 独立于方法之外 但是没有static修饰 每个实例都有自己的一个这个变量的版本 实例变量具有默认值。数值型变量的默认值是0，布尔型变量的默认值是false，引用类型变量的默认值是null 变量的值可以在声明时指定，也可以在构造方法中指定</li>
<li>局部变量 类方法中的变量 <strong>访问修饰符可以修饰实例变量</strong></li>
</ul>
<p>局部变量</p>
<ul>
<li>声明在方法、构造方法或者语句块中</li>
<li>访问修饰符不能用于局部变</li>
<li>局部变量是没有默认值 所有被声明之后需要初始化之后才可以使用</li>
</ul>
<hr>
<p>final修饰变量</p>
<p><strong>final</strong> 变量能被显式地初始化并且只能初始化一次。被声明为 final 的对象的引用不能指向不同的对象。但是 final 对象里的数据可以被改变。也就是说 final 对象的引用不能改变，但是里面的值可以改变</p>
<p>final修饰类中的方法<br>类中的 final 方法可以被子类继承，但是不能被子类修改。</p>
<p>final修饰类<br>final修饰的类不能被继承 没有类能继承final类的任何特性</p>
<hr>
<h2 id="abstract修饰符"><a href="#abstract修饰符" class="headerlink" title="abstract修饰符"></a>abstract修饰符</h2><blockquote>
<p>abstract抽象类是不能用来实例化对象的 声明抽象类的唯一目的就是将来对该类进行扩充 </p>
</blockquote>
<p>如果一个类中具有抽象方法 那么这个类一定要声明微抽象类 抽象方法的的定义由子类提供</p>
<p><strong>任何继承抽象类的子类必须实现父类的所有抽象方法，除非该子类也是抽象类。</strong></p>
<p>abstract抽象类例子<br>Test.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Mon_class</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son_class</span> <span class="keyword">extends</span> <span class="title">Mon_class</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is a m func"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">        Son_class test_class = <span class="keyword">new</span> Son_class();</span><br><span class="line">        test_class.m();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以使用非抽象子类的构造函数创建一个抽象父类的引用对象 并且可以调用具体定义在非抽象子类中的重写方法<br>但是注意非抽象类的构造函数并不可以用来创建一个实例</p>
<hr>
<h2 id="synchronized-修饰符"><a href="#synchronized-修饰符" class="headerlink" title="synchronized 修饰符"></a>synchronized 修饰符</h2><p>synchronized 关键字声明的方法同一时间只能被一个线程访问。synchronized 修饰符可以应用于四个访问修饰符。</p>
<hr>
<h2 id="transient-修饰符"><a href="#transient-修饰符" class="headerlink" title="transient 修饰符"></a>transient 修饰符</h2><p>序列化的对象包含被 transient修饰的实例变量时，java虚拟机(JVM)跳过该特定的变量。<br>该修饰符包含在定义变量的语句中，用来预处理类和变量的数据类型。</p>
<hr>
<h2 id="volatile-修饰符"><a href="#volatile-修饰符" class="headerlink" title="volatile 修饰符"></a>volatile 修饰符</h2><p>volatile 修饰的成员变量在每次被线程访问时，都强制从共享内存中重新读取该成员变量的值。而且，当成员变量发生变化时，会强制线程将变化值回写到共享内存。这样在任何时刻，两个不同的线程总是看到某个成员变量的同一个值。</p>
<p>一个 volatile 对象引用可能是 null。</p>
<hr>
<h2 id="extends和implements"><a href="#extends和implements" class="headerlink" title="extends和implements"></a>extends和implements</h2><ol>
<li>在类的声明中，通过关键字extends来创建一个类的子类。一个类通过关键字implements声明自己使用一个或者多个接口。<br>extends 是继承某个类, 继承之后可以使用父类的方法, 也可以重写父类的方法; implements 是实现多个接口, 接口的方法一般为空的, 必须重写才能使用<br>2.extends是继承父类，只要那个类不是声明为final或者那个类定义为abstract的就能继承，JAVA中不支持多重继承，但是可以用接口 来实现，这样就要用到implements，继承只能继承一个类，但implements可以实现多个接口，用逗号分开就行了</li>
</ol>
<hr>
<h2 id="instanceof运算符"><a href="#instanceof运算符" class="headerlink" title="instanceof运算符"></a>instanceof运算符</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">        String name = <span class="string">"gzm"</span>;</span><br><span class="line">        System.out.println(name <span class="keyword">instanceof</span> String);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="装箱和拆箱"><a href="#装箱和拆箱" class="headerlink" title="装箱和拆箱"></a>装箱和拆箱</h2><p>在java中的内置数据类型对应的包装类都是继承一个叫做Number的抽象类的，关系图如下<br><img src="http://static.zybuluo.com/gzm1997/ju6g8b2cnhyoxnqdx8a1iprz/image_1cetpi31q1ldo12bi1f1l1i841aru9.png" alt="image_1cetpi31q1ldo12bi1f1l1i841aru9.png-43.3kB"></p>
<ul>
<li>当内置数据类型被当作对象使用的时候 编译器会吧内置类型装箱</li>
<li>反过来 编译器也会一个包装类拆箱</li>
</ul>
<p>比如下面是整型包装类和内置类型之间的装箱和拆箱之间的关系<br><img src="http://static.zybuluo.com/gzm1997/dykem4xmjm8n3tzgk0zlk8c1/image_1cetputrjfl1t58lp7o0g1a8m.png" alt="image_1cetputrjfl1t58lp7o0g1a8m.png-3kB"></p>
<p>例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//装箱</span></span><br><span class="line">        Integer num = <span class="number">5</span>;</span><br><span class="line">        <span class="comment">//拆箱</span></span><br><span class="line">        num += <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">"num "</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="Charactor"><a href="#Charactor" class="headerlink" title="Charactor"></a>Charactor</h2><p>char这个内置数据类型对应的包装类是Charactor</p>
<hr>
<h2 id="String和char-array"><a href="#String和char-array" class="headerlink" title="String和char array"></a>String和char array</h2><p>String和char array的相互转换以及遍历<br>String转为char array<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String t_str = <span class="string">"abcd"</span>;</span><br><span class="line"><span class="keyword">char</span> [] c_arr = t_str.toCharArray();</span><br></pre></td></tr></table></figure></p>
<p>char array转为String<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String new_str = <span class="keyword">new</span> String(c_arr);</span><br></pre></td></tr></table></figure></p>
<p>foreach只可以用来迭代可迭代对象 String并不是可迭代对象 只有char array是可迭代对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">char</span> c: c_arr</span><br><span class="line">     ) &#123;</span><br><span class="line">    System.out.println(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">char</span> c: <span class="keyword">new</span> <span class="keyword">char</span>[]&#123;<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>&#125;</span><br><span class="line">     ) &#123;</span><br><span class="line">    System.out.println(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>String类是不可该改变的 即使具有concat那些字符串连接方法 但是那也是新建了一个新的String对象 如果需要改变字符串 那么就需要使用StringBuffer和StringBuilder对象了</p>
<ul>
<li>String 不可修改 速度最慢</li>
<li>StringBuffer 可修改 速度中等 线程安全</li>
<li>StringBuilder 可修改 速度最快 非线程安全</li>
</ul>
<p>StringBuffer基本使用<br>(注意在insert和replace这些函数中 start end的范围是跟python是相同 都是包含start但是没有包含end)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String []args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        StringBuffer test_buffer = <span class="keyword">new</span> StringBuffer(<span class="string">"lala"</span>);</span><br><span class="line">        test_buffer.append(<span class="string">"heihei"</span>);</span><br><span class="line">        System.out.println(test_buffer);</span><br><span class="line">        test_buffer.reverse();</span><br><span class="line">        System.out.println(test_buffer);</span><br><span class="line">        test_buffer.delete(test_buffer.length() - <span class="number">3</span>, test_buffer.length());</span><br><span class="line">        System.out.println(test_buffer);</span><br><span class="line">        test_buffer.replace(<span class="number">1</span>, <span class="number">2</span>, <span class="string">"heihei"</span>);</span><br><span class="line">        System.out.println(test_buffer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h2><p>如果在StringBilder的构造函数中没有传入一个长度参数，那么这个构造函数将会为这个StringBuilder分配默认的16个字符的空间</p>
<hr>
<p>什么是内存抖动Memory Churn<br>内存抖动是因为大量对象被创建又在段时间内马上被释放 内存页被频繁更换 导致整个系统效率急剧下降 这个现象称为内存抖动 一般都是因为内存分配算法不好 内存太小造成的<br><strong>其实内存抖动就是系统颠簸</strong></p>
<hr>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>基本使用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String content = <span class="string">"i am haha"</span>;</span><br><span class="line">String patern = <span class="string">".*haha"</span>;</span><br><span class="line">System.out.println(Pattern.matches(patern, content));</span><br></pre></td></tr></table></figure></p>
<p>常用的正则表达</p>
<ul>
<li>.表示任意一个字符</li>
<li>\s+表示若干个空格(应该是1个或者多个)</li>
<li>\d+表示一个或者多个数字</li>
<li>\.表示.</li>
<li>()?表示问好前面中的括号的内容是可选的</li>
<li>{n} n为非负数 表示前面的字符刚好重复n次</li>
<li>{n，} n为非负数 表示前面的字符至少重复n次</li>
<li>{n，m} n为非负数 表示前面的字符出现次数至少n次 之多m次</li>
<li>x|y 匹配x或者y</li>
<li>[xyz]匹配xyz中任一字符</li>
<li>[^xyz] 跟上面的相反 匹配不是xyz的字符</li>
<li>[a-z] 字符范围 匹配a-z之间的字符</li>
<li>[^a-z]反向范围</li>
<li>\b匹配一个字符边界(字符和空格间的位置) 例如，”er\b”匹配”never”中的”er”，但不匹配”verb”中的”er”。</li>
<li>\B匹配一个非字符边界 “er\B”匹配”verb”中的”er”，但不匹配”never”中的”er”。</li>
</ul>
<hr>
<h2 id="java可变参数"><a href="#java可变参数" class="headerlink" title="java可变参数"></a>java可变参数</h2><p>从jdk1.5开始 java支持传递同类型的可变参数 这个跟声明参数为数组类型的不同的地方在于可以传入多个同类型的参数</p>
<p>声明方式</p>
<pre><code>typeName... parameterName
</code></pre><p>例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testPrint</span><span class="params">(<span class="keyword">int</span>... arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"no parameter has been transfer"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i: arr</span><br><span class="line">             ) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">        testPrint(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">        testPrint(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="收尾机制finalize"><a href="#收尾机制finalize" class="headerlink" title="收尾机制finalize"></a>收尾机制finalize</h2><p>例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Object</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    Dog(<span class="keyword">int</span> _id) &#123;</span><br><span class="line">        id = _id;</span><br><span class="line">        System.out.printf(<span class="string">"id %d dog is create\n"</span>, id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> java.lang.Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.finalize();</span><br><span class="line">        System.out.printf(<span class="string">"id %d dog is dispose\n"</span>, id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">        Dog d1 = <span class="keyword">new</span> Dog(<span class="number">1</span>);</span><br><span class="line">        Dog d2 = <span class="keyword">new</span> Dog(<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//Dog d3 = new Dog(3);</span></span><br><span class="line">        <span class="comment">//d1 = null;</span></span><br><span class="line">        <span class="comment">//System.gc();</span></span><br><span class="line">        d1 = d2 = <span class="keyword">null</span>;</span><br><span class="line">        System.gc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="java-io"><a href="#java-io" class="headerlink" title="java io"></a>java io</h2><p>从控制台中输入一个字符<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        <span class="keyword">int</span> r = br.read();</span><br><span class="line">        <span class="keyword">char</span> c = (<span class="keyword">char</span>) r;</span><br><span class="line">        System.out.println(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在控制台中输入一个字符串 也是使用Bufferreader这个对象进行读取 但是是使用readline这个函数进行读取<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        String r = br.readLine();</span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以解决中文输入输出出现乱码都解决方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"a.txt"</span>);</span><br><span class="line">        FileOutputStream fop = <span class="keyword">new</span> FileOutputStream(f);</span><br><span class="line">        <span class="comment">// 构建FileOutputStream对象,文件不存在会自动新建</span></span><br><span class="line"></span><br><span class="line">        OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fop, <span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">// 构建OutputStreamWriter对象,参数可以指定编码,默认为操作系统默认编码,windows上是gbk</span></span><br><span class="line"></span><br><span class="line">        writer.append(<span class="string">"中文输入"</span>);</span><br><span class="line">        <span class="comment">// 写入到缓冲区</span></span><br><span class="line"></span><br><span class="line">        writer.append(<span class="string">"\r\n"</span>);</span><br><span class="line">        <span class="comment">//换行</span></span><br><span class="line"></span><br><span class="line">        writer.append(<span class="string">"English"</span>);</span><br><span class="line">        <span class="comment">// 刷新缓存冲,写入到文件,如果下面已经没有写入的内容了,直接close也会写入</span></span><br><span class="line"></span><br><span class="line">        writer.close();</span><br><span class="line">        <span class="comment">//关闭写入流,同时会把缓冲区内容写入文件,所以上面的注释掉</span></span><br><span class="line"></span><br><span class="line">        fop.close();</span><br><span class="line">        <span class="comment">// 关闭输出流,释放系统资源</span></span><br><span class="line"></span><br><span class="line">        FileInputStream fip = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">        <span class="comment">// 构建FileInputStream对象</span></span><br><span class="line"></span><br><span class="line">        InputStreamReader reader = <span class="keyword">new</span> InputStreamReader(fip, <span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="comment">// 构建InputStreamReader对象,编码与写入相同</span></span><br><span class="line"></span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">while</span> (reader.ready()) &#123;</span><br><span class="line">            sb.append((<span class="keyword">char</span>) reader.read());</span><br><span class="line">            <span class="comment">// 转成char加到StringBuffer对象中</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">        reader.close();</span><br><span class="line">        <span class="comment">// 关闭读取流</span></span><br><span class="line"></span><br><span class="line">        fip.close();</span><br><span class="line">        <span class="comment">// 关闭输入流,释放系统资源</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="Scanner"><a href="#Scanner" class="headerlink" title="Scanner"></a>Scanner</h2><p>Scanner是java5的新特征 可以通过Scanner类来获取输入的字符串或者数字 字符</p>
<p>下面是获取输入字符串的例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Scanner s = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">if</span> (s.hasNext()) &#123;</span><br><span class="line">            String r = s.next();</span><br><span class="line">            System.out.println(r);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Scanner s1 = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">if</span> (s1.hasNextLine()) &#123;</span><br><span class="line">            String r = s1.nextLine();</span><br><span class="line">            System.out.println(r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure></p>
<p>next和nextLine的区别<br>next</p>
<ol>
<li>一定要读取到有效字符后才可以结束输入。</li>
<li>对输入有效字符之前遇到的空白，next()方法会自动将其去掉。</li>
<li>只有输入有效字符后才将其后面输入的空白作为分隔符或者结束符。</li>
<li>next() 不能得到带有空格的字符串。</li>
</ol>
<p>nextLine</p>
<ol>
<li>以Enter为结束符,也就是说 nextLine()方法返回的是输入回车之前的所有字符。</li>
<li>可以获得空白。</li>
</ol>
<hr>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p><img src="http://static.zybuluo.com/gzm1997/53k55dvgsec69ejiu8eweqzx/image_1cf08i4nf1ifd1qtm12hfuoa1lu9.png" alt="image_1cf08i4nf1ifd1qtm12hfuoa1lu9.png-24.4kB"></p>
<hr>
<h2 id="继承和接口"><a href="#继承和接口" class="headerlink" title="继承和接口"></a>继承和接口</h2><blockquote>
<p>java的继承是单继承 就是说一个子类只可以有一个父类 同时java是支持多重继承的 就是说c可以继承b b继承a 这就是多重继承</p>
</blockquote>
<p>但是java也是可以通过interface来实现多重继承的<br>例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">B</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A_test</span> <span class="keyword">implements</span> <span class="title">A</span>, <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is eat func"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is sleep func"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String []args)</span> </span>&#123;</span><br><span class="line">        A_test test_a = <span class="keyword">new</span> A_test();</span><br><span class="line">        test_a.eat();</span><br><span class="line">        test_a.sleep();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>值得一提的是 接口也可以初始化实例 并且这些接口初始化出来的实例也可以调用它们的方法 即使这些方法的定义在implements了它们的class中</p>
<hr>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><blockquote>
<p>java的子类是不能继承夫类的构造函数的 但是当父类的构造函数含有参数时候 必须在子类的构造函数中使用super关键字调用父类构造函数 并且传入参数<br>但是当父类的构造函数没有参数 子类不是必须super调用父类构造函数的 因为系统会自动调用父类的无参构造函数</p>
</blockquote>
<hr>
<h2 id="继承中的引用对象"><a href="#继承中的引用对象" class="headerlink" title="继承中的引用对象"></a>继承中的引用对象</h2><p>可以使用</p>
<ul>
<li>子类的构造函数构造父类的引用对象</li>
<li>不可以使用父类的构造函数构造子类的引用对象</li>
</ul>
<p>如果使用的是子类的构造函数来构造父类的引用对象 那么这个对象调用的函数版本是子类中重写的版本</p>
<hr>
<h2 id="override和overload"><a href="#override和overload" class="headerlink" title="override和overload"></a>override和overload</h2><p>重写</p>
<ul>
<li>重写是在子类和父类之间的</li>
<li>重写的参数列表和返回类型必须相同</li>
<li>声明微final的方法不可以被重写</li>
<li>构造方法不可以被重写</li>
<li>static方法不可以被重写 但是可以被重新声明</li>
</ul>
<p>子类和父类都具有相同的static的的同名 同参数列表 同返回类型的函数 但是<strong>这不是重写 static函数不可以被重写 这是重新声明</strong></p>
<p>static函数被重新声明的时候<br>无论父类的引用对象是被父类构造函数还是子类构造函数构造的 它调用的版本都是父类的static函数版本</p>
<p>子类的引用对象调用的版本是自己重新声明的static版本</p>
<p>例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"animal is move"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testStatic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is animal static func"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Dog is move"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testStatic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is a Dog static funcss"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">         Animal a = <span class="keyword">new</span> Animal();</span><br><span class="line">         Animal b = <span class="keyword">new</span> Dog();</span><br><span class="line">         a.testStatic();</span><br><span class="line">         b.testStatic();</span><br><span class="line">         Dog c = <span class="keyword">new</span> Dog();</span><br><span class="line">         c.testStatic();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>输出<br><img src="http://static.zybuluo.com/gzm1997/7lvemg4vbu261q3dcd98zx1z/image_1cf49j0l51m6jpbfaqp4h6f219.png" alt="image_1cf49j0l51m6jpbfaqp4h6f219.png-8.3kB"></p>
<p>重载</p>
<ul>
<li>在通一个class中</li>
<li>返回类型 函数名 参数列表相同</li>
</ul>
<hr>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>多态是建立在上面的方法重写之上的 被重写的方法称为虚方法</p>
<p>多态的编译和运行</p>
<p>使用子类引用子类的对象 </p>
<ul>
<li>在编译的时候编译器会在子类中找到相应的方法 然后执行的时候JVM会调用子类的这个方法</li>
</ul>
<p>使用父类引用子类的对象</p>
<ul>
<li>在编译时 编译器会使用父类的虚方法进行验证 但是在运行时 JVM调用的是子类的对应的虚方法</li>
</ul>
<p>java的所有方法都按照这种方式来实现 因此<strong>重写方法能在运行时调用</strong> 不敢编译的时候源代码中引用变量是什么数据类型</p>
<p> 多态的实现方式</p>
<ul>
<li>重写</li>
<li>接口</li>
</ul>
<p>我一直以为重写是实现多态的唯一方式 但是java里面接口也是实现多态的一种方式 比如上面的多态内容中 我不是发现使用implements了接口的类构造函数类来创建一个interface引用对象 并且可以调用实现方法在这个class中的方法 所以这也是实现多态的一种方式</p>
<p>例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is move func in Dog"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A testA = <span class="keyword">new</span> Dog();</span><br><span class="line">        testA.move();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意 interface没有构造函数 因为根本不能用以实例化一个对象</p>
<hr>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>interface特性</p>
<ul>
<li>每个接口的方法都隐士指定为public abstract 其他修饰符都会报错</li>
<li>接口中可以有变量到 都会被隐士指定为public static final 使用private修饰编译会报错</li>
<li>接口的方法不能在接口中实现 只能由实现接口的类来实现</li>
<li>接口可以继承 这个跟类的继承相似 但是类只支持多重继承 不支持多继承 接口的继承支持多继承也支持多重继承</li>
</ul>
<p>标记接口</p>
<blockquote>
<p>最常用的继承接口是没有包含任何方法的接口和属性的 这个叫做<strong>标记接口</strong> 主要是表明它的类属于一个特定的类型</p>
</blockquote>
<p>目的</p>
<ul>
<li>建立一个公共的父接口 正如EventListener接口，这是由几十个其他接口扩展的Java API，你可以使用一个标记接口来建立一组接口的父接口。例如：当一个接口继承了EventListener接口，Java虚拟机(JVM)就知道该接口将要被用于一个事件的代理方案</li>
<li>向一个类添加数据类型 这种情况是标记接口最初的目的，实现标记接口的类不需要定义任何接口方法(因为标记接口根本就没有方法)，但是该类通过多态性变成一个接口类型</li>
</ul>
<hr>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><blockquote>
<p>同一个包内的类命名是不可以相同的 但是不同包内的命名是可以相同的</p>
</blockquote>
<p>包例子：<br>结构如下</p>
<ul>
<li>animal<ul>
<li>Animal.java(Animal interface)</li>
<li>MammalInt.java(MammalInt class implements Animal)</li>
</ul>
</li>
<li>Test.java(import animal.MammalInt)</li>
</ul>
<p>Animal.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> animal;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>MammalInt.jav<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> animal;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MammalInt</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"this is is animal eat func"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MammalInt testM = <span class="keyword">new</span> MammalInt();</span><br><span class="line">        testM.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Test.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> animal.MammalInt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MammalInt testM = <span class="keyword">new</span> MammalInt();</span><br><span class="line">        testM.eat();</span><br><span class="line">        System.out.println(<span class="string">"this is test java file"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p> 运行Test.java<br> <img src="http://static.zybuluo.com/gzm1997/mz2rq84io7bbnj3v4814emzz/image_1cf4lkjqb6vtuc0f5ja2nc0kt.png" alt="image_1cf4lkjqb6vtuc0f5ja2nc0kt.png-7.7kB"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/04/java基础知识/" data-id="cji5njk6400059so0y129lybi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python包调用问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/26/python包调用问题/" class="article-date">
  <time datetime="2018-05-26T03:22:36.000Z" itemprop="datePublished">2018-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/26/python包调用问题/">python包调用问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>以前其实一直不是很清楚包调用的具体情况，觉得可以调用就可以了，但是这次系分大作业上我想把结构设计得更好看一点，这时候包调用就出现了一些问题</p>
</blockquote>
<hr>
<h2 id="嵌套调用"><a href="#嵌套调用" class="headerlink" title="嵌套调用"></a>嵌套调用</h2><p>嵌套调用没什么特别的，就是在包中调用这个包里面的一个包，有结构如下</p>
<ul>
<li>out_module<ul>
<li>__init__.py</li>
<li>out.py</li>
<li>in_module<ul>
<li>__init__.py</li>
<li>in.py</li>
</ul>
</li>
</ul>
</li>
<li>test.py</li>
</ul>
<p>在out_module这个包中的out.py中调用in_module的in.py只需要在out.py中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> out_module.in_module <span class="keyword">import</span> <span class="keyword">in</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="平行调用"><a href="#平行调用" class="headerlink" title="平行调用"></a>平行调用</h2><p>平行调用就是两个包在路径上市并列的，从一个包中调用另一个包中的模块或者函数，如下就是在m1.py中调用m2.py或者m2.py中的函数或者变量</p>
<ul>
<li>module1<ul>
<li>__init__.py</li>
<li>m1.py</li>
</ul>
</li>
<li>module2<ul>
<li>__init__.py</li>
<li>m2.py</li>
</ul>
</li>
</ul>
<p>谷歌搜到的方法是往sys.path中添加被调用包处在的路径，类似如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">"G:\\大三下\\test\\test_module"</span>)</span><br></pre></td></tr></table></figure></p>
<p>这样可以解决问题，但是代码看起来不是很好看，可移植性也不高，毕竟如果需要部署的话也要修改这个路径值。所以我给出了一个稍微好一点的几角方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> pathlib</span><br><span class="line">BASE_DIR = pathlib.Path(__file__).parent.parent</span><br><span class="line">models_path = BASE_DIR / <span class="string">"module2"</span></span><br><span class="line">sys.path.append(str(models_path))</span><br><span class="line"><span class="keyword">import</span> m2</span><br></pre></td></tr></table></figure></p>
<p>注意pathlib.Path(__file__).parent.parent返回值是一个WindowsPath对象实例，如果是往sys.path中直接添加是没有效果的，所以要用str转为字符串。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/26/python包调用问题/" data-id="cji5njk6a000a9so0opif8a4e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/package/">package</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用异步ORM-aiomysql-sa" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/26/使用异步ORM-aiomysql-sa/" class="article-date">
  <time datetime="2018-05-26T02:46:37.000Z" itemprop="datePublished">2018-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/26/使用异步ORM-aiomysql-sa/">使用异步ORM aiomysql.sa</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>因为系统分析与设计大作业的web框架我选择了使用aiohttp这个异步框架，所以ORM的选择上要做出改变。sqlalchemy是不支持异步IO的，所以用sqlalchemy搭配aiohttp并不可行，最终我选择了整合了sqlalchemy的aiomysql.sa，这是一个支持mysql的异步ORM。</p>
</blockquote>
<p>相关的学习链接<br><a href="http://aiomysql.readthedocs.io/en/latest/sa.html" target="_blank" rel="noopener">官方文档</a><br><a href="https://github.com/aio-libs/aiomysql/blob/master/docs/sa.rst" target="_blank" rel="noopener">用法参考</a></p>
<p>从官方文档上我们可以看到</p>
<p><img src="http://static.zybuluo.com/gzm1997/qxak3ah9finr2ect9ah131ug/image_1ced39bc8n731hlgijuectil9.png" alt="image_1ced39bc8n731hlgijuectil9.png-12.2kB"></p>
<p>aiomysql的api接口跟aiopg是非常类似的，可以在学习中参考一下aiopg，同时aiomysql.sa是整合了sqlalchemy的，也可以参考sqlalchemy的文档。为什么我要这么说呢，因为aiomysql.sa官方提供的文档描述相当有限，在学习过程中必须参考少之又少的资料，并且这些资料可能因为版本问题还不一定是对的。</p>
<hr>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><p>python的异步io很多都是基于python的协程实现的，asyncio就是，同时aiomysql.sa也是底层由协程实现，所以我们是使用aiomysql.sa过程中，都需要定义各种操作为<strong>协程</strong>。</p>
<p>1.初始化引擎</p>
<p>初始化引擎跟mysql.connector很类似，但是返回一个engine实例<br><img src="http://static.zybuluo.com/gzm1997/wau66y7hzv1p6u8bny2sxiu9/image_1ced3mktqg6t1hr35mg1p1qed0m.png" alt="image_1ced3mktqg6t1hr35mg1p1qed0m.png-28.8kB"><br>例子<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">init_engine</span><span class="params">()</span>:</span></span><br><span class="line">    engine = <span class="keyword">await</span> aiomysql.sa.create_engine(user = config[<span class="string">"user"</span>], db = config[<span class="string">"database"</span>], host = config[<span class="string">"host"</span>], password = config[<span class="string">"password"</span>])</span><br><span class="line">    <span class="keyword">return</span> engine</span><br></pre></td></tr></table></figure></p>
<p>2.引擎获取与事务<br>这部分我看了下文档和github上的用法参考，感觉都不怎么正确，可能因为版本问题，自己总结了如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">with</span> engine.acquire() <span class="keyword">as</span> conn:</span><br><span class="line">    trans = <span class="keyword">await</span> conn.begin()</span><br><span class="line">    <span class="keyword">await</span> conn.execute(food.insert().values(name = <span class="string">"test_food"</span>))</span><br><span class="line">    <span class="keyword">await</span> trans.commit()</span><br></pre></td></tr></table></figure></p>
<p>引擎资源的获取需要engine.acquire()来获取，返回值为一个SAconnection实例，可以进行execute(query, *multiparams, **params)操作。</p>
<p>最好在with语句里面使用acquire，这样可以自动释放engine资源。</p>
<p>aiomysql.sa支持事务，它无论是insert delete还是select都需要事务的提交，没错你没看错，select它都必须你提交事务，不然会报错<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed to release a connection <span class="keyword">with</span> transaction started at <span class="string">'aiomysql'</span></span><br></pre></td></tr></table></figure></p>
<p>同时这个报错有点意思，如果你没有主动提交事务，它这个报错一定会出现的，但是如果你之前的增删查着操作出现了错误，它会导致整个事务失败，最终这个事务没办法成功提交，也会报这个错误。<strong>也就是说如果出现这个错误，并一定就是你事务没有主动提交，而是有可能你的增删查着操作出现了错误导致事务的失败。</strong></p>
<p>事务的获取和提交，事务的获取可以通过SAconnection.begin()获取这个事务<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trans = <span class="keyword">await</span> conn.begin()</span><br></pre></td></tr></table></figure></p>
<p>事务提交<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> trans.commit()</span><br></pre></td></tr></table></figure></p>
<p>嵌套事务<br>文档中这样描述嵌套事务</p>
<blockquote>
<p>Nested calls to begin() on the same SAConnection will return new Transaction objects that represent an emulated transaction within the scope of the enclosing transaction</p>
</blockquote>
<p>在同一个SAconnection中嵌套调用begin的话，会在外层事务中间返回一个模仿的事务对象</p>
<p>嵌套事务的特点</p>
<blockquote>
<p>Calls to Transaction.commit() only have an effect when invoked via the outermost Transaction object, though the Transaction.rollback() method of any of the Transaction objects will roll back the transaction</p>
</blockquote>
<p>只有当最外层的事务被调用，那么事务才会被提交，例子如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">trans = <span class="keyword">yield</span> <span class="keyword">from</span> conn.begin()   <span class="comment"># outermost transaction</span></span><br><span class="line">trans2 = <span class="keyword">yield</span> <span class="keyword">from</span> conn.begin()  <span class="comment"># "inner"</span></span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">from</span> trans2.commit()          <span class="comment"># does nothing</span></span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">from</span> trans.commit()           <span class="comment"># actually commits</span></span><br></pre></td></tr></table></figure></p>
<p>最后说一数据结构的声明，因为在sqlalchemy中我们一般比较习惯使用class User(Base)这样的方式来定义我们的数据库表结构，因为这符合我们面向对象编程的习惯，同时定义了这些class之后我们可以在稍后的增删查着操作中使用这些class。但是在aiomysql.sa中这样做并不好。官方文档中这样解释<br><img src="http://static.zybuluo.com/gzm1997/1ad8i0z2sc9pq3yiasaof0bo/image_1ced511agkr510uc104oevv1qr013.png" alt="image_1ced511agkr510uc104oevv1qr013.png-59.7kB"></p>
<p>就是说Question.query.filter_by(question_text=’Why’).first()或者session.query(TableName).all()之类的查询并不支持异步，所以把表结构定义为class并没有什么帮助，正确的做法是定义为Table对象。</p>
<p>关于class和Table对象的关系我之前<a href="https://gzm1997.github.io/2018/05/16/sqlalchemy%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E6%A6%82%E5%BF%B5/" target="_blank" rel="noopener">一篇博客</a>有说过，就是创建一个class就会自动生成一个同名的Table对象，并且使用一个Mapper对象将这两个对象映射在一起。</p>
<p>所以我们在aiomysql.sa中定义我们的数据库表结构大多形如下面<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">food = sa.Table(</span><br><span class="line">    <span class="string">"food"</span>,</span><br><span class="line">    meta,</span><br><span class="line">    sa.Column(<span class="string">"id"</span>, sa.Integer, primary_key = <span class="keyword">True</span>),</span><br><span class="line">    sa.Column(<span class="string">"name"</span>, sa.String(<span class="number">50</span>), unique = <span class="keyword">True</span>, nullable = <span class="keyword">False</span>),</span><br><span class="line">    sa.Column(<span class="string">"picture"</span>, sa.String(<span class="number">50</span>)),</span><br><span class="line">    sa.Column(<span class="string">"price"</span>, sa.Integer, nullable = <span class="keyword">False</span>),</span><br><span class="line">    sa.Column(<span class="string">"description"</span>, sa.String(<span class="number">50</span>)),</span><br><span class="line">    sa.Column(<span class="string">"rating"</span>, sa.Float),</span><br><span class="line">    sa.Column(<span class="string">"amount"</span>, sa.Integer, nullable = <span class="keyword">False</span>),</span><br><span class="line">    sa.Column(<span class="string">"likes"</span>, sa.Integer, default = <span class="number">0</span>),</span><br><span class="line">    sa.Column(<span class="string">"tag_id"</span>, sa.Integer, sa.ForeignKey(<span class="string">"tag.id"</span>), nullable = <span class="keyword">False</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>基本用法基本就是上面所说的了，具体可以参考一下<a href="https://github.com/gzm1997/aio_ooad" target="_blank" rel="noopener">我github上系统分析与设计的web后台</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/26/使用异步ORM-aiomysql-sa/" data-id="cji5njk6j000i9so06dp5zla3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ORM/">ORM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/async/">async</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-aiohttp基本使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/26/aiohttp基本使用/" class="article-date">
  <time datetime="2018-05-25T16:45:53.000Z" itemprop="datePublished">2018-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/26/aiohttp基本使用/">aiohttp基本使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>这次系统分析与设计大作业我负责web后端开发工作，本来又想使用flask框架的，但是想想flask框架都有点审美疲劳了，而且flask框架是阻塞式框架，效率未免有点不高。所以这次我使用了异步web框架aiohttp，简单记录一下基本使用，至于框架原理之类后面再深入研究。</p>
</blockquote>
<p><a href="https://demos.aiohttp.org/en/latest/preparations.html" target="_blank" rel="noopener">官方文档</a></p>
<hr>
<h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h2><p>简单hello world代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> aiohttp <span class="keyword">import</span> web</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = web.Application()</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> web.Response(text = <span class="string">"hello"</span>)</span><br><span class="line"></span><br><span class="line">    app.router.add_get(<span class="string">"/"</span>, hello)</span><br><span class="line">    web.run_app(app, port = <span class="number">5000</span>)</span><br></pre></td></tr></table></figure></p>
<p>在路由中添加视图函数<br>1.get</p>
<p>url例子： /<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.router.add_get(<span class="string">"/"</span>, hello)</span><br></pre></td></tr></table></figure></p>
<p>url例子： /api/order/3<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.router.add_get(<span class="string">"/api/order/&#123;id&#125;"</span>, reservation_view.get_order)</span><br></pre></td></tr></table></figure></p>
<p>使用以下获取参数id<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id = int(request.match_info[<span class="string">'id'</span>])</span><br></pre></td></tr></table></figure></p>
<p>url例子： /test?uuid=12<br>使用以下获取url参数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uuid = request.rel_url.query[<span class="string">'uuid'</span>]</span><br></pre></td></tr></table></figure></p>
<p>2.post</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.router.add_post(<span class="string">"/api/order"</span>, reservation_view.create_order)</span><br></pre></td></tr></table></figure>
<p>使用以下获取表单data<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="keyword">await</span> request.post()</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><blockquote>
<p>在这次系分的后端开发过程中，遇到了一个我以前也遇到过的问题，但是我忘记了以前我是怎么解决的了。问题就是，当post的表单中有一个value值为一个list，那么服务端这边接受会这样？</p>
</blockquote>
<p>上面的问题就是服务端这边接受了这个字典之后，会发现这个list的value值已经变形了，具体情况如下：<br>发送表单<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    session = requests.Session()</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">"table"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">"list"</span>: [&#123;<span class="string">'id'</span>: <span class="string">'1'</span>, <span class="string">'name'</span>: <span class="string">'pork'</span>, <span class="string">'count'</span>: <span class="number">1</span>, <span class="string">'price'</span>: <span class="number">20</span>&#125;, &#123;<span class="string">'id'</span>: <span class="string">'2'</span>, <span class="string">'name'</span>: <span class="string">'fish'</span>, <span class="string">'count'</span>: <span class="number">1</span>, <span class="string">'price'</span>: <span class="number">23</span>&#125;]</span><br><span class="line">    &#125;</span><br><span class="line">    print(<span class="string">"data"</span>, data)</span><br><span class="line">    r = session.post(<span class="string">"http://127.0.0.1:5000/api/order"</span>, data = data)</span><br><span class="line">    print(<span class="string">"r"</span>, r)</span><br></pre></td></tr></table></figure></p>
<p>服务端接收为，很显然变形了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MultiDictProxy(<span class="string">'table'</span>: <span class="string">'1'</span>, <span class="string">'list'</span>: <span class="string">'id'</span>, <span class="string">'list'</span>: <span class="string">'name'</span>, <span class="string">'list'</span>: <span class="string">'count'</span>, <span class="string">'list'</span>: <span class="string">'price'</span>, <span class="string">'list'</span>: <span class="string">'id'</span>, <span class="string">'list'</span>: <span class="string">'name'</span>, <span class="string">'list'</span>: <span class="string">'count'</span>, <span class="string">'list'</span>: <span class="string">'price'</span>)&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我想到的解决方法就是将list这个value转为string类型再post过来，很显然或者解决方法很简单，问题就在于怎么在服务端这边从新将这个string解释为list对象，并且回复里面的字典。谷歌之后发现这样使用python的ast模块解决这个问题非常的方便</p>
<p>发送将list类型的value转为list之后的字典<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">"table"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">"list"</span>: <span class="string">"[&#123;'id': '1', 'name': 'pork', 'count': 1, 'price': 20&#125;, &#123;'id': '2', 'name': 'fish', 'count': 1, 'price': 23&#125;]"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>服务端这边接受和解析<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="keyword">await</span> request.post()</span><br><span class="line">table_num = data[<span class="string">"table"</span>]</span><br><span class="line">food_list = ast.literal_eval(data[<span class="string">"list"</span>])</span><br></pre></td></tr></table></figure></p>
<p>这样就完美解决这个问题了，可能还有其他不修改list类型更好的方法，但是我觉得就不深究了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/26/aiohttp基本使用/" data-id="cji5njk5o00009so05lv1gwqt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/async/">async</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/backend/">backend</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-自制简易图片云盘" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/22/自制简易图片云盘/" class="article-date">
  <time datetime="2018-05-22T08:43:50.000Z" itemprop="datePublished">2018-05-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/22/自制简易图片云盘/">自制简易图片云盘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/gzm1997/gallery" target="_blank" rel="noopener">github地址</a></p>
<hr>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>因为我经常在<strong>markdown</strong>书写过程中需要获取我一些图片或者截图的在线url，但是有些图片云盘需要收费或者要自己手动上传不方便。自己上传github固然可以，但是还是不够方便，所以写了个小脚本。</p>
<hr>
<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><p><img src="https://raw.githubusercontent.com/gzm1997/gallery/master/mature/demo.gif" alt="demo"></p>
<hr>
<h2 id="需要"><a href="#需要" class="headerlink" title="需要"></a>需要</h2><ol>
<li>python</li>
<li>git</li>
<li>python依赖PIL</li>
</ol>
<hr>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><ol>
<li>一开始需要把配图或者截图保存到本地(<strong>本地的git仓库中的raw文件夹</strong>)，不需要修改文件名。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/gzm1997/gallery/master/mature/18.png" alt="文件结构"></p>
<hr>
<ol start="2">
<li>点击运行 <strong>run.cmd</strong> 文件</li>
</ol>
<p><img src="https://raw.githubusercontent.com/gzm1997/gallery/master/mature/20.png" alt="run.cmd"> </p>
<p>可以看见后面会输出这张图片的url，最后会提示你确认退出，其实这个确认退出只是为了<strong>造成阻塞</strong>，不然这个cmd文件运行完就自动关闭窗口不留时间给你复制url了。</p>
<hr>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>只用了一点点很简单的<strong>py</strong></p>
<ol>
<li><p>把保存在raw文件夹里面的图片复制到mature文件夹里面，并重命名(其实重命名不是必要的)，最后删除raw里面的原图片，最终返回这张图片的新名字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def deliver_image():</span><br><span class="line">	raw = os.listdir(&quot;raw&quot;)</span><br><span class="line">	if raw == []:</span><br><span class="line">		return False</span><br><span class="line">	f = open(&quot;num.txt&quot;, &quot;rb&quot;)</span><br><span class="line">	num_str = f.read().decode(&quot;utf-8&quot;)</span><br><span class="line">	num = int(num_str)</span><br><span class="line">	f.close()</span><br><span class="line">	old_name = &quot;raw/&quot; + raw[0]</span><br><span class="line">	image_to_add = Image.open(old_name)</span><br><span class="line">	new_name = str(num + 1) + &quot;.png&quot;</span><br><span class="line">	image_to_add.save(&quot;mature/&quot; + new_name)</span><br><span class="line">	f = open(&quot;num.txt&quot;, &quot;wb&quot;)</span><br><span class="line">	f.write(str(num + 1).encode(&quot;utf-8&quot;))</span><br><span class="line">	f.close()</span><br><span class="line">	os.remove(&quot;raw/&quot; + raw[0])</span><br><span class="line">	return new_name</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用subprocess产生三个子进程去调用git命令，使这个本地仓库的修改被push到github上的仓库中，最后返回这张图片在github上的地址</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def push_to_github():</span><br><span class="line">	subprocess.call(&quot;git add .&quot;, shell = True)</span><br><span class="line">	subprocess.call(&quot;git commit -m 新增一张图片&quot;, shell = True)</span><br><span class="line">	subprocess.call(&quot;git push origin master&quot;, shell = True)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>运行<h2 id="py中运行"><a href="#py中运行" class="headerlink" title="py中运行"></a>py中运行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">	pic_name = deliver_image()</span><br><span class="line">	if pic_name != False:</span><br><span class="line">		push_to_github()</span><br><span class="line">		print(&quot;图片的url:&quot;)</span><br><span class="line">		print(&quot;https://raw.githubusercontent.com/gzm1997/gallery/master/mature/&quot; + pic_name)</span><br><span class="line">		stop = input(&quot;确认退出:&quot;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="cmd中"><a href="#cmd中" class="headerlink" title="cmd中"></a>cmd中</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python add.py</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/22/自制简易图片云盘/" data-id="cji5njk6p000p9so0gv416fhh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/image/">image</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sqlalchemy一些常见概念" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/16/sqlalchemy一些常见概念/" class="article-date">
  <time datetime="2018-05-16T08:00:53.000Z" itemprop="datePublished">2018-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/16/sqlalchemy一些常见概念/">sqlalchemy一些常见概念</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="metadata"><a href="#metadata" class="headerlink" title="metadata"></a>metadata</h2><p>官方文档解释</p>
<blockquote>
<p>The MetaData is a registry which includes the ability to emit a limited set of schema generation commands to the database. As our SQLite database does not actually have a users table present, we can use MetaData to issue CREATE TABLE statements to the database for all tables that don’t yet exist. Below, we call the MetaData.create_all() method, passing in our Engine as a source of database connectivity</p>
</blockquote>
<p>metadata是一个注册器，里面包含一些数据库的模式生成命令，可以调用metadata发起create table命令来创建这个表</p>
<p><img src="http://static.zybuluo.com/gzm1997/y94c7jye04to8blqvbn15su3/image_1cdjqt91j1hpr34cos1euqodr9.png" alt="image_1cdjqt91j1hpr34cos1euqodr9.png-5.9kB"></p>
<hr>
<h2 id="mapper"><a href="#mapper" class="headerlink" title="mapper"></a>mapper</h2><p>sqlalchemy中创建一个继承declarative_base的类的本质是，创建一个class的同时生成一个同名的Table对象，并且使用一个mapper对象将两个对象映射在一起。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'my_table'</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="keyword">True</span>)</span><br><span class="line">    type = Column(String(<span class="number">50</span>))</span><br><span class="line">    alt = Column(<span class="string">"some_alt"</span>, Integer)</span><br><span class="line"></span><br><span class="line">    __mapper_args__ = &#123;</span><br><span class="line">        <span class="string">'polymorphic_on'</span> : type</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>上述代码跟下面效果是一样的<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">my_table = Table(<span class="string">"my_table"</span>, metadata,</span><br><span class="line">    Column(<span class="string">'id'</span>, Integer, primary_key=<span class="keyword">True</span>),</span><br><span class="line">    Column(<span class="string">'type'</span>, String(<span class="number">50</span>)),</span><br><span class="line">    Column(<span class="string">"some_alt"</span>, Integer)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">mapper(MyClass, my_table,</span><br><span class="line">    polymorphic_on=my_table.c.type,</span><br><span class="line">    properties=&#123;</span><br><span class="line">        <span class="string">'alt'</span>:my_table.c.some_alt</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="对象状态转换"><a href="#对象状态转换" class="headerlink" title="对象状态转换"></a>对象状态转换</h2><p><img src="http://static.zybuluo.com/gzm1997/j5p2qxy0l2s5t54tvk4jx59y/image_1cdjs8hm616i15k3vss1r6u17ju3j.png" alt="image_1cdjs8hm616i15k3vss1r6u17ju3j.png-14.2kB"></p>
<p>值得一提的是，当class被add到session中，但是没有commit，此时这个class并没有被写入数据库，但是此时进行query查询这个class是可以被查询出来的，因为当执行query时，执行了flush操作，调用了sql语句，这个class对应的row被生成。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, String, Integer, ForeignKey, create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker, relationship, backref</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line">Base = declarative_base()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">"user"</span></span><br><span class="line">    id = Column(Integer, primary_key = <span class="keyword">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">engine = create_engine(<span class="string">'mysql+mysqlconnector://root:Gzm20125@localhost:3306/test'</span>)</span><br><span class="line">DBSession = sessionmaker(bind = engine)</span><br><span class="line"></span><br><span class="line">Base.metadata.drop_all(engine)</span><br><span class="line">Base.metadata.create_all(engine)</span><br><span class="line"><span class="comment"># 创建session对象:</span></span><br><span class="line"></span><br><span class="line">session = DBSession()</span><br><span class="line"></span><br><span class="line">u = User(id = <span class="number">1</span>, name = <span class="string">"gzm"</span>)</span><br><span class="line">session.add(u)</span><br><span class="line">print(session.query(User).filter_by(id = <span class="number">1</span>).first())</span><br></pre></td></tr></table></figure>
<p>输出<br><img src="http://static.zybuluo.com/gzm1997/2uovj0ildc954przw50hrcia/image_1cdjsg49k1qk49j6192o1vmd1vdp40.png" alt="image_1cdjsg49k1qk49j6192o1vmd1vdp40.png-13.5kB"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/16/sqlalchemy一些常见概念/" data-id="cji5njk6700089so0m2cmgl9l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqlalchemy/">sqlalchemy</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-软件生命周期" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/15/软件生命周期/" class="article-date">
  <time datetime="2018-05-15T15:02:50.000Z" itemprop="datePublished">2018-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/15/软件生命周期/">软件生命周期</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>这几天我都在深深地反思，发现自己的确是一个很功利的人，从框架的工具化就可以看出来。越是患得患失就越容易失去。我觉得我这段时间可以多写点代码，并且这不能很以往一样，一个劲地写，应该从工程上开始考量所有问题。</p>
</blockquote>
<hr>
<h2 id="软件生命周期6大阶段"><a href="#软件生命周期6大阶段" class="headerlink" title="软件生命周期6大阶段"></a>软件生命周期6大阶段</h2><ol>
<li>可行性分析和计划阶段<ul>
<li>确定软件开发的总体目标，给出功能，性能，可靠性，接口等方面的要求，进行可行性分析</li>
<li>估计可利用的资源(硬件，软件，人力等)，成本，效益，开发进度，进行投资收益分析，制定开发计划</li>
<li>提交可行性分析报告，开发计划等文档</li>
</ul>
</li>
<li>需求分析阶段<ul>
<li>分析用户提出的要求，给出需求详细定义，确定软件系统的各项功能，性能需求和设计约束，确定对文档的编制的要求</li>
<li>提交软件需求说明，软件规格说明，数据要求说明等文档和初步用户手册</li>
</ul>
</li>
<li>设计阶段<ul>
<li>概要设计：将各项需求转换为软件的体系结构。软件的每一组成部分都是意义明确的模块，每个模块和某些需求相对应</li>
<li>详细设计：对没一个模块要完成的工作进行具体的描述，提供源编程编写的直接依据</li>
<li>提交结构设计说明，详细设计说明和测试计划初稿等文稿</li>
</ul>
</li>
<li>实现阶段<ul>
<li>实现源码编码，编译，和排错调试，得到没有语法错误的程序清单。程序结构良好，清晰易读，且与设计想一致</li>
<li>编写进度日报，周报，和月报</li>
<li>提交用户手册，操作手册等面向用户的文档的编写工作</li>
<li>编写测试计划</li>
</ul>
</li>
<li>测试阶段<ul>
<li>全面测试目标软件系统，并检查审阅已编制的文档，提交测试分析报告。逐项评价所生产的程序、文档以及开发工作本身，提交项目开发总结报告</li>
<li>在整个开发过程中 (即前五个阶段中)，开发集体需要按月编写<br>开发进度月报。</li>
</ul>
</li>
<li>运行与维护阶段<ul>
<li>软件提交给用户后，在运行使用中得到持续维护，根据用户新<br>提出的需求进行必要而且可能的扩充、删改、更新和升级。</li>
<li>软件维护包括改正性维护 (发现错误)、适应性维护 (适应运行<br>环境变化) 和完善性维护 (增强功能)。</li>
</ul>
</li>
</ol>
<hr>
<h2 id="常见软件生命周期模型"><a href="#常见软件生命周期模型" class="headerlink" title="常见软件生命周期模型"></a>常见软件生命周期模型</h2><blockquote>
<p>软件开发过程一般应该采用某种类型的软件生命周期模型，按<br>照一定的开发方法，使用相应的工具系统实现。</p>
</blockquote>
<p>常见模型</p>
<ul>
<li>瀑布模型 (Waterfall Model)</li>
<li>V-W 模型 (V Model and W Model)</li>
<li>快速应用开发模型 (RAD Model)</li>
<li>原型模型 (Prototype Model)</li>
<li>增量/演化/迭代模型 (Incremental Model)</li>
<li>螺旋模型 (Spiral Model)</li>
<li>喷泉模型 (Fountain Model, Object-Oriented Model)</li>
<li>基于构件的开发模型 (CBSD Model)</li>
<li>Rational 统一过程模型 (RUP Model)</li>
<li>*敏捷开发模型与极限编程 (Agile Modeling and XP)</li>
</ul>
<hr>
<h2 id="瀑布模型"><a href="#瀑布模型" class="headerlink" title="瀑布模型"></a>瀑布模型</h2><p><img src="http://static.zybuluo.com/gzm1997/ovwgmbl03ugmj2l9sm1p0jfy/image_1c8ias8gck9c5rmro9cihae89.png" alt="image_1c8ias8gck9c5rmro9cihae89.png-96.4kB"></p>
<p>特征</p>
<ul>
<li>每一阶段工作对象来自于上一阶段的输出</li>
<li>根据本阶段的活动规程执行相应的任务</li>
<li>本阶段产生相关软件工件，作为下一阶段活动的输入</li>
<li>对本阶段的活动情况进行评审</li>
</ul>
<p>优点</p>
<ul>
<li>降低软件开发的复杂程度，提高软件开发过程的透明性，提高软件开发过程的可管理性</li>
<li>推迟软件实现，强调在软件实现前必须进行分析和设计工作</li>
<li>以项目的阶段评审和文档控制为手段有效地对整个开发过程进行指导，保证了阶段之间的正确衔接，能够及时发现并纠正开发过程中存在的缺陷，使产品达到预期的质量要求</li>
</ul>
<p>缺点</p>
<ul>
<li>强调过程活动的线性顺序</li>
<li>缺乏灵活性，特别是无法解决软件需求不明确或不准确的问题</li>
<li>风险控制能力较弱</li>
<li>瀑布模型中的软件活动是文档驱动的，当阶段之间规定过多的文档时，会极大地增加系统的工作量</li>
<li>管理人员如果仅仅以文档的完成情况来评估项目完成进度，往往会产生错误的结论</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/15/软件生命周期/" data-id="cji5njk6q000q9so04qoaa5hk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/软件开发生命周期/">软件开发生命周期</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sysu教务选课系统登陆" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/15/sysu教务选课系统登陆/" class="article-date">
  <time datetime="2018-05-15T15:01:05.000Z" itemprop="datePublished">2018-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/15/sysu教务选课系统登陆/">sysu教务选课系统登陆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>准备：<br>python3<br>安装tesseract,本人提供的tesseract百度云下载，亲测版本4比较多坑，这是版本3，已经够用的了<br>链接: <a href="http://pan.baidu.com/s/1boHp2Jt" target="_blank" rel="noopener">http://pan.baidu.com/s/1boHp2Jt</a> 密码: 6trj</p>
<hr>
<ul>
<li>下载本项目到本地</li>
<li>进入主目录，输入以下命令安装相关依赖：</li>
</ul>
<pre><code>pip install -r requirements.txt
</code></pre><ul>
<li><p>在如下59和64行输入你的账号和密码：<br><img src="https://github.com/15331094/sysu_login/blob/master/screenshots/input.png?raw=true" alt="输入账号密码"></p>
</li>
<li><p>输入一下命令运行代码：</p>
<p> python login.py</p>
</li>
</ul>
<p>运行之后打印不少内容：<br>第一个是一个byte,内容就是下载下来的验证码：<br><img src="https://github.com/15331094/sysu_login/blob/master/screenshots/icode.png?raw=true" alt="验证码"><br>第二个是登陆后的页面：<br><img src="https://github.com/15331094/sysu_login/blob/master/screenshots/after_login.png?raw=true" alt="登陆之后"><br>第三个是我的选课结果：<br><img src="https://github.com/15331094/sysu_login/blob/master/screenshots/my_lesson.png?raw=true" alt="选课结果"></p>
<hr>
<p>最后可以发现本地生成了一个after_login.html的html文件，打开之后发现你的选课结果被下载下来了：<br><img src="https://github.com/15331094/sysu_login/blob/master/screenshots/lession.png?raw=true" alt="选课结果"></p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li>icode模块负责图片去噪和识别验证码</li>
<li>entryption模块负责加密密码</li>
<li>login模块负责登陆和抓取一些页面</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/15/sysu教务选课系统登陆/" data-id="cji5njk6d000f9so0vf2lwhwq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/requests/">requests</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ORM/">ORM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aiohttp/">aiohttp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async/">async</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backend/">backend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deep-web/">deep web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deploy/">deploy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask/">flask</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask深入学习/">flask深入学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/image/">image</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package/">package</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/requests/">requests</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlalchemy/">sqlalchemy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/软件开发生命周期/">软件开发生命周期</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ORM/" style="font-size: 10px;">ORM</a> <a href="/tags/aiohttp/" style="font-size: 10px;">aiohttp</a> <a href="/tags/async/" style="font-size: 15px;">async</a> <a href="/tags/backend/" style="font-size: 10px;">backend</a> <a href="/tags/deep-web/" style="font-size: 10px;">deep web</a> <a href="/tags/deploy/" style="font-size: 10px;">deploy</a> <a href="/tags/flask/" style="font-size: 10px;">flask</a> <a href="/tags/flask深入学习/" style="font-size: 10px;">flask深入学习</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/image/" style="font-size: 10px;">image</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/mysql/" style="font-size: 20px;">mysql</a> <a href="/tags/package/" style="font-size: 10px;">package</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/requests/" style="font-size: 10px;">requests</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/sqlalchemy/" style="font-size: 15px;">sqlalchemy</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/软件开发生命周期/" style="font-size: 10px;">软件开发生命周期</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/06/08/nginx-supervisor部署aiohttp/">nginx+supervisor部署aiohttp</a>
          </li>
        
          <li>
            <a href="/2018/06/08/java-socket编程/">java socket编程</a>
          </li>
        
          <li>
            <a href="/2018/06/04/java基础知识/">java基础知识</a>
          </li>
        
          <li>
            <a href="/2018/05/26/python包调用问题/">python包调用问题</a>
          </li>
        
          <li>
            <a href="/2018/05/26/使用异步ORM-aiomysql-sa/">使用异步ORM aiomysql.sa</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 gzm1997<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>